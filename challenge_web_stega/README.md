# Web / Steganography challenge

This challenge mixes web vulnerabilities and steganography. The attacker must find a way to upload and run a webshell on a picture management site, make network discovery and find a password hidden in an image to access the last machine of the network.

## Installation

	git clone https://github.com/SuperTeam1nsa/THC_challenge.git
	cd challenge_web_stega/docker
	sh install.sh  # OR make sure you have installed all the tools in the "apt-get install" lines of the script

## Attack

1. scan the network
2. open the web site 10.43.2.1 in a browser
3. make a simple sql injection to sign in
4. go to "Upload new photo" tab
5. make or find a web shell and add a png header to it
6. upload the web shell file with a ".png" extension
7. intercept the request with burp and change MIME type to image/png

Note : There is a script doing the steps 4 to 7 in :

	exploit/exploit.sh

To get a web shell, juste run the script and then sign in on the web site and go to the page displayed at the end of the script output

8. send commands to authorize ssh root login and change root password
9. use ssh to connect to the web site host
10. scan network
11. access web site 10.43.3.1
12. download the only image available on the web page
13. apply the commands of the "unsteg" section of the "stega/howto.txt" file
14. open the file starwars.txt generated by the previous commands, look at the recipient of the letter, this is a password
15. open a ssh connection to 10.43.3.1 as root with the password you previously found
16. retrieve the "flag.txt" file in the "/root" directory

